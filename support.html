<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Support Card Deck Randomizer — Slots</title>
  <style>
    :root{--accent:#ff69b4;--muted:#888}
    body{font-family:Inter,Arial,Helvetica,sans-serif;background:#fafafa;color:#222;padding:18px}
    h1{color:var(--accent);margin-bottom:6px}
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;max-width:980px;margin:12px auto}
    .slot{background:#fff;border-radius:10px;padding:10px;box-shadow:0 6px 18px rgba(0,0,0,0.06);text-align:center}
    .chosen{min-height:120px;display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:8px;background:linear-gradient(180deg,#fff,#fbfbfb);padding:6px}
    .chosen img{max-width:160px;border-radius:8px;display:block}
    .chosen .meta{font-size:13px;margin-top:8px;color:var(--muted)}
    select{width:100%;padding:6px;border-radius:8px;border:1px solid #e2e8f0;margin-top:8px}
    .card-list{margin-top:8px;max-height:140px;overflow-y:auto;text-align:left;padding:6px}
    .rarity{font-weight:700;margin-top:6px}
    .card-item{font-size:13px;padding:4px 6px;border-radius:6px;color:#333}
    .card-item:hover{background:#fff0f6;color:var(--accent);cursor:default}
    button{background:var(--accent);color:#fff;border:none;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600}
    .controls{max-width:980px;margin:16px auto;display:flex;justify-content:center;gap:12px}
    .note{max-width:980px;margin:10px auto;color:#666;font-size:13px;text-align:center}
    .card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 10px;
}

.card-grid img {
  width: 100%;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.card-grid img.disabled {
  filter: grayscale(100%);
  opacity: 0.5;
}
.type-icon {
  width: 48px;
  height: 48px;
  cursor: pointer;
  filter: grayscale(100%); /* blanco y negro */
  transition: filter 0.2s;
}

.type-icon.active {
  filter: none; /* color al activarse */
}
  </style>
</head>
<body>
  <h1>Support Card Deck Randomizer</h1>
  <p class="note">Selecciona el tipo en cada slot (3 arriba, 3 abajo).</p>

  <div class="grid-3" id="grid">
    <!-- Los slots se crearán por JS -->
  </div>

  <div class="controls">
    <button id="generateBtn">Generar</button>
    <button id="clearDeckBtn">Limpiar Deck</button>
  </div>

  <!-- Botón y contenedor del selector -->
  <div class="controls">
    <button id="toggleSelectorBtn">Mostrar / Ocultar Selector de Cartas</button>
  </div>
  <div id="cardSelector" style="display:none; margin-top:20px;">
    <h3>Selecciona las cartas que NO deseas incluir:</h3>    
      <div id="typeIcons" style="display:flex;justify-content:center;gap:12px;margin:16px 0;">
      <img src="https://gametora.com/images/umamusume/icons/utx_ico_obtain_00.png" alt="Speed" data-type="Speed" class="type-icon bw" title="Speed">
      <img src="https://gametora.com/images/umamusume/icons/utx_ico_obtain_01.png" alt="Stamina" data-type="Stamina" class="type-icon bw" title="Stamina">
      <img src="https://gametora.com/images/umamusume/icons/utx_ico_obtain_02.png" alt="Power" data-type="Power" class="type-icon bw" title="Power">
      <img src="https://gametora.com/images/umamusume/icons/utx_ico_obtain_03.png" alt="Guts" data-type="Guts" class="type-icon bw" title="Guts">
      <img src="https://gametora.com/images/umamusume/icons/utx_ico_obtain_04.png" alt="Wit" data-type="Wit" class="type-icon bw" title="Wit">
      <img src="https://gametora.com/images/umamusume/icons/utx_ico_obtain_05.png" alt="Pal" data-type="Pal" class="type-icon bw" title="Pal">
    </div>
    <div id="allCardsGrid" style="display:flex;flex-wrap:wrap;max-width:980px;margin:12px auto"></div>
    <button onclick="toggleAllCards()" id="toggleAllBtn">Seleccionar todas</button>
  </div>

  <script>
    /* =========================
       Datos: añade tus cartas aquí
       Estructura: SUPPORT_CARDS[Tipo][Rareza] = [{name, img}, ...]
       Mantén el orden: la carta más reciente debe ir al inicio del array.
       ========================= */
    const SUPPORT_CARDS = {
      Speed: {
        SSR: [
          {name: 'Silence Susuka [Beyond This Shining Moment]', rarity: 'SSR', img: 'https://img.game8.co/4216910/aa4e4ba1a9a3668f44f2aa386298385c.png/show'},
          {name: 'Tokai Teio [Dream Big!]', rarity: 'SSR', img: 'https://img.game8.co/4216909/51948a362a139d9db95f858673d39164.png/show'},
          {name: 'Gold City [Run (my) way]', rarity: 'SSR', img: 'https://img.game8.co/4216998/31975f7313b9d90e516b11a8fb401d16.png/show'},
          {name: 'Sakura Bakushin O [Eat Fast! Yum Fast!]', rarity: 'SSR', img: 'https://img.game8.co/4216997/9199c689e4fae87c75764644e1833aae.png/show'},
          {name: 'Nishino Flower [Even the Littlest Bud]', rarity: 'SSR', img: 'https://img.game8.co/4216919/54fb7e8c2ee829ca0d4ec498ca151171.png/show'},
          {name: 'Biko Pegasus [Double Carrot Punch!]', rarity: 'SSR', img: 'https://img.game8.co/4216915/273ed12209143b4b32b2664c5ac70333.png/show'},
          {name: 'Special Week [The Setting Sun And Rising Stars]', rarity: 'SSR', img: 'https://img.game8.co/4217015/153838608e154b6d9fc4f2739cab45c7.png/show'},
          {name: 'Twin Turbo [Turbo Booooost!]', rarity: 'SSR', img: 'https://img.game8.co/4217002/2b9c281107ec3d4154f7fcc2b2f4cf43.png/show'},
          {name: 'Kitasan Black [Fire at My Heels]', rarity: 'SSR', img: 'https://img.game8.co/4218616/5381cc866a49ad65f83876f47662001e.png/show'},
          {name: 'Kawakami Princess [Princess Bride]', rarity: 'SSR', img: 'https://img.game8.co/4240310/7e1e1c8e33168b4776b94edab682fa01.png/show'},
          {name: 'Narita Brian [Two Pieces]', rarity: 'SSR', img: 'https://j-img.game8.co/5999066/86be0ae4e735c6322c615dcdcb854e58.png/show'},
          {name: 'Sweep Tosho [It´s All Mine!]', rarity: 'SSR', img: 'https://j-img.game8.co/6016547/2798bc830e1bf9abd02c90ead8164e69.png/show'},
          {name: 'Gold Ship [That Time I Became the Strongest]', rarity: 'SSR', img: 'https://img.game8.co/4265535/0ee8574957219b1df6d026df96a2ccdd.png/show'},
          {name: 'Zenno Rob Roy [Magical Heroine]', rarity: 'SSR', img: 'https://img.game8.jp/6194857/3140096dd7c0e56fc72d23db2db17353.png/show'},
          {name: 'Mayano Top Gun [Party Formation]', rarity: 'SSR', img: 'https://img.game8.jp/6346020/b48b87bcd6fbe1c83ba01b65556935ee.png/show'},
          {name: 'Silence Suzuka [Searching for Unseen Sights]', rarity: 'SSR', img: 'https://img.game8.jp/6401694/350e508a7dcc93a4928410041d581abc.png/show'},
          {name: 'Matikanefukukitaru [Touching Sleeves Is Good Luck! ♪]', rarity: 'SSR', img: 'https://img.game8.jp/6435147/8d5faca7fcf3ff98be4347537d123240.png/show'},
          {name: 'Tosen Jordan [My Way]', rarity: 'SSR', img: 'https://img.game8.jp/6528952/74b92e27160279835b7389bd482cea45.png/show'},
        ],
        
        SR: [
          {name: 'Eishin Flash [5:00 a.m.-Right on Schedelude]', rarity: 'SR', img: 'https://img.game8.co/4216988/65712f78efdb6c1097a6f28ede3bf38a.png/show'},
          {name: 'Narita Taishin [Poolside High Tides]', rarity: 'SR', img: 'https://img.game8.co/4216949/dd886bfcb235062c2e41b877c42aaa4b.png/show'},
          {name: 'King Halo [First-Rate Plan]', rarity: 'SR', img: 'https://img.game8.co/4216928/014824fcd1d9de631eccb6a433409cee.png/show'},
          {name: 'Sweep Tosho [Lamplit Training of a Witch-to-be]', rarity: 'SR', img: 'https://img.game8.co/4216948/9e6f130e4e2f5be3b66861c4c92da8fa.png/show'},
          {name: 'Shinko Windy [///WARNING GATE///]', rarity: 'SR', img: 'https://img.game8.co/4265539/f87e48b64e3000ff0f36d297bc598588.png/show'},
          {name: 'Vodka [An Annoying Supervisor]', rarity: 'SR', img: 'https://img.game8.jp/6323966/f114185183057275130bb063bbf95f8a.png/show'}
        ],
        
        R: [
          {name: 'Silence Suzuka [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216954/1019b9e32c6d7850ba55617a7e8669fa.png/show'},
          {name: 'Tokai Teio [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216959/bf4560656e8ca7fda37ba5477c72af5e.png/show'},
          {name: 'Maruzensky [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216950/e4141fdc741674ca7b3512ec3e9b6468.png/show'},
          {name: 'Taiki Shuttle [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216957/54e24c9cd99a977dbee27afcdd2c5e4b.png/show'},
          {name: 'Gold City [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216981/dd61bdddd1fb5cc291ea16e765f1f9f3.png/show'},
          {name: 'Sakura Bakushin O [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216974/933838b311a7c164195b88a9c36c811f.png/show'},
          {name: 'Eishin Flash [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216941/d14d8bcb6be822aeece0a5a3bf6f155a.png/show'},
          {name: 'Narita Taishin [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216920/246d26ee842e7fc007ef814836a6df20.png/show'},
          {name: 'Nishino Flower [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216946/3daa19ce9ab89028f76dee446f3fdaf2.png/show'},
          {name: 'Biko Pegasus [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216953/fc7a321c3278dcccd414599822b5b7ae.png/show'},
          {name: 'King Halo [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216951/677a2e35a382bda5cd1985260d0dab1a.png/show'},
          {name: 'Sweep Tosho [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216936/604a1c3a59272eb3fe209904ae3ddd54.png/show'},
          {name: 'Twin Turbo [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216931/77a177c0357294688af14a54d14e4829.png/show'},
          {name: 'Kitasan Black [Tacen Academy]', rarity: 'R', img: 'https://img.game8.co/4220094/aac5fc032ffe362016d38908744ae808.png/show'},
          {name: 'Kawakami Princess [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4240307/922cecc9a504169fecdef3717e53de7f.png/show'},
          {name: 'Shinko Windy [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4265536/6c7264106af71acea8ca24feff425033.png/show'},
          {name: 'Narita Brian [Tracen Academy]', rarity: 'R', img: 'https://j-img.game8.co/5996712/627600ab3c550db3ca37efe682e822ca.png/show'},
        ]
      },
      
      Stamina: { 
        SSR: [
          {name: 'Gold Ship [Breakaway Battleship]', rarity: 'SSR', img: 'https://img.game8.co/4216912/ad2ffcd0c5a83b819990da8aeacf4040.png/show'},
          {name: 'Seiun Sky [Foolproof Plan]', rarity: 'SSR', img: 'https://img.game8.co/4216918/ae698c30c34fe8a17261eeab497483e7.png/show'},
          {name: 'Tamamo Cross [Split the Sky, White Lightning!]', rarity: 'SSR', img: 'https://img.game8.co/4216995/100f8901e234bb4b2095dba2ae40f1ce.png/show'},
          {name: 'Super Creek [Piece of Mind]', rarity: 'SSR', img: 'https://img.game8.co/4216916/3c352856b5348f43d8c4f057c6a40b84.png/show'},
          {name: 'Mejiro McQueen [Your Team Ace]', rarity: 'SSR', img: 'https://img.game8.co/4216967/4f3a2e381dc8d111a93fe38c85ad99af.png/show'},
          {name: 'Rice Shower [Showered In Joy]', rarity: 'SSR', img: 'https://img.game8.co/4216940/e66e67fb539011f5dcc2538201d78d7b.png/show'},
          {name: 'Satono Diamond [The Will to Overtake]', rarity: 'SSR', img: 'https://img.game8.co/4218617/68c4c7cdcd26a13fa87c5f083a7548e0.png/show'},
          {name: 'Sakura Chiyono O [Peak Sakura Season]', rarity: 'SSR', img: 'https://img.game8.co/4240303/fe95aa0a90beae0552e3b2590c7d0c1b.png/show'},
          {name: 'Nakayama Festa [43, 8, 1]', rarity: 'SSR', img: 'https://img.game8.jp/6242692/a1b006c47ea03bef109a1753e53d676d.png/show'},
          {name: 'Winning Ticket [Full-Blown Tantrum]', rarity: 'SSR', img: 'https://j-img.game8.co/6016543/21ed3b6f7fe7235bc944bb252dc9e98b.png/show'},
          {name: 'Silence Suzuka [Winning Dream]', rarity: 'SSR', img: 'https://j-img.game8.co/6098494/f5858d36d8d294374fac0d2f65cf3c8b.png/show'},
          {name: 'Narita Brian [The Whistling Arrow´s Taunt]', rarity: 'SSR', img: 'https://img.game8.jp/6261701/d0e1967440808fa5789c37f2eb4bd520.png/show'},
          {name: 'Manhattan Cafe [My Solo Spun in Spiraling Runs]', rarity: 'SSR', img: 'https://img.game8.jp/6374824/374be4d8d36e755c25984e946503b151.png/show'},
          {name: 'Meisho Doto [Leaping into the Unknown]', rarity: 'SSR', img: 'https://img.game8.jp/6435148/62971166bc7d8acb87138f1a2e93bf09.png/show'},
        ], 
        
        SR: [
          {name: 'Mayano Top Gun [Cute + Cute = ?]', rarity: 'SR', img: 'https://img.game8.co/4216926/2bc1f9e84ecbf9679cdd487ffeaf9e26.png/show'},
          {name: 'Manhattan Cafe [My Solo Drawn to Raindrop Drums]', rarity: 'SR', img: 'https://img.game8.co/4216952/f1b0919a543ae5bbbf7675dca6303063.png/show'},
          {name: 'Zenno Rob Roy [The Perfect Book for You]', rarity: 'SR', img: 'https://img.game8.co/4240325/bf5c49a492d10f49ce2b5eefb46f2618.png/show'},
          {name: 'Tosen Jordan [Turf as Nails]', rarity: 'SR', img: 'https://j-img.game8.co/6086656/859d375ffc3dbe2b81b30cce2af958dd.png/show'},
        ], 
        
        R: [
          {name: 'Gold Ship [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216961/59a2a240a409cfd57c83e82ed37fd434.png/show'},
          {name: 'Mejiro McQueen [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216963/6b940b5b9f6ed75695ee941e29a058f1.png/show'},
          {name: 'T.M. Opera O [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216970/da0ba4a6907b5aba49c695919734ddff.png/show'},
          {name: 'Seiun Sky [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216968/070bc090ae02d0198c1e83f8832e8228.png/show'},
          {name: 'Rice Shower [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216972/d00c0476e1ac8bad6cd3fb428b36a574.png/show'},
          {name: 'Super Creek [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216973/537845e3dc506c502f30d7a8d5570a61.png/show'},
          {name: 'Tamamo Cross [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216942/3144a4677f6f28e34a870f4f1b3b2f04.png/show'},
          {name: 'Mayano Top Gun [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216932/d10a5d12814ff99769c5747966ec8b3c.png/show'},
          {name: 'Manhattan Cafe [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216964/2e51a394a56c396e1c52fbc0340bade1.png/show'},
          {name: 'Satono Diamond [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4220092/9589a7fa91696cd23fd7123a3b8cf1f9.png/show'},
          {name: 'Zenno Bob Roy [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4240323/7e2a6bce31f9530c4728acbdb0d3ed03.png/show'},
          {name: 'Sakura Chiyono O [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4240306/159ae442c50884f1c84304c745aeeeb5.png/show'},
          {name: 'Nakayama Festa [Tracen Academy]', rarity: 'R', img: 'https://img.game8.jp/6242691/518eb1a1653835326e11430893a0420b.png/show'},
          {name: 'Tosen Jordan [Tracen Academy]', rarity: 'R', img: 'https://j-img.game8.co/6087644/ffd7588568164ca8c913c5b38410dc76.png/show'},
        ] 
      },

      Power: { 
        SSR: [
          {name: 'Vodka [Wild Rider]', rarity: 'SSR', img: 'https://img.game8.co/4216913/4d6bd93fa56fbfc5e0cd0030d2e2a9f6.png/show'},
          {name: 'El Condor Pasa [Champion´s Passion]', rarity: 'SSR', img: 'https://img.game8.co/4216923/1472686860a94fb146fde06ce54e8b1f.png/show'},
          {name: 'Smart Falcon [My Umadol Way! ☆]', rarity: 'SSR', img: 'https://img.game8.co/4217001/fe4cac07008576090fd964b3d38632c1.png/show'},
          {name: 'Oguri Cap [Get Lost of hugs for Me]', rarity: 'SSR', img: 'https://img.game8.co/4217003/518c8eddab55c3f267dce7ef379fddc2.png/show'},
          {name: 'Yaeno Muteki [Fiery Discipline]', rarity: 'SSR', img: 'https://img.game8.co/4237780/22199a75c4856c2b7cf4a62f924319d1.png/show'},
          {name: 'Winning Ticket [Dreams Do Come True!]', rarity: 'SSR', img: 'https://img.game8.co/4241068/b4f4cfe7abe0b4309e5fc0766987344b.png/show'},
          {name: 'Rice Shower [Happiness Just around the Bend]', rarity: 'SSR', img: 'https://j-img.game8.co/6114397/cd956f5a6bd4b723d9a982e4355274f0.png/show'},
          {name: 'Bamboo Memory [Head-On Fight!]', rarity: 'SSR', img: 'https://img.game8.co/4265537/8175e07d8fd54c9db7442efbd1167136.png/show'},
          {name: 'Daiwa Scarlet [Mini☆Vacation]', rarity: 'SSR', img: 'https://j-img.game8.co/6016542/d74ef657b6cb291ea598dea28198006b.png/show'},
          {name: 'King Halo [Tonight, We Waltz]', rarity: 'SSR', img: 'https://img.game8.co/4265538/ec50d2bfb95fac3ea272eb1ae10f96ae.png/show'},
          {name: 'Tamamo Cross [Beware! Halloween Night!]', rarity: 'SSR', img: 'https://img.game8.jp/6194858/aef5ed0ba6a2576e58d2f2a034d54647.png/show'},
          {name: 'Daitaku Helios [Make! Some! NOISE!]', rarity: 'SSR', img: 'https://img.game8.jp/6323965/2027da139c07918831f3d5eaebc89d7b.png/show'},
          {name: 'Marvelous Sunday [Dazzling Day in the Snow]', rarity: 'SSR', img: 'https://img.game8.jp/6346031/4546e1d6214f74ac3146d2e41cb713b4.png/show'},
          {name: 'Admire Vega [Lucky Star in the Sky]', rarity: 'SSR', img: 'https://img.game8.jp/6435152/3ce336059a600bad1c6890be3757c052.png/show'},
        ], 
        
        SR: [
          {name: 'Hishi Amazon [Reach to the Top!]', rarity: 'SR', img: 'https://img.game8.co/4216976/2534fb62fff784e4c60681a94f8d463f.png/show'},
          {name: 'Agnes Digital [Digitals´s Recharge Station', rarity: 'SR', img: 'https://img.game8.co/4217008/9b0fff05441ee19ba7d325d87970381a.png/show'},
          {name: 'Biwa Hayahide [Trial Initiation]', rarity: 'SR', img: 'https://img.game8.co/4217006/afec7558fcd9f4114e494bd8d383efe0.png/show'},
          {name: 'Mihono Bourbon [Pal-Assisted Training]', rarity: 'SR', img: 'https://img.game8.co/4216922/d680f1ccee2313f552d68ef0df152c09.png/show'},
          {name: 'Mejiro Ryan [On and Off the Court]', rarity: 'SR', img: 'https://img.game8.co/4216982/b37eb45e683a42665e0cd32a8db2eb9d.png/show'},
          {name: 'Daitaku Helios [Let´s Get This Party Lit!]', rarity: 'SR', img: 'https://img.game8.co/4216925/cdc63377f6c99bceb7fa4aad1ebdf636.png/show'},
          {name: 'Nishino Flower [Lifting Your Spirits]', rarity: 'SR', img: 'https://img.game8.co/4231268/c0730360dd0ff078fd0d4ffbe002f2ab.png/show'},
          {name: 'Inari One [Laughing through the Mud]', rarity: 'SR', img: 'https://img.game8.jp/6374826/06ed01789fea258f8dd66030805fddb3.png/show'},
          {name: 'Fine Motion [Grma, Ramen ♪]', rarity: 'SR', img: 'https://img.game8.jp/6175645/d2d1f94b481dc4276227a689d2b93c6b.png/show'},
        ], 
        
        R: [
          {name: 'Oguri Cap [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216930/35f5505cb0d3c2208da599adfeb6f600.png/show'},
          {name: 'Vodka [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216960/3b82e35bb967b81225fd68a4dd2a39c6.png/show'},
          {name: 'El Condor Pasa [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216975/0021b31fcb6f158bcbadd99cb889fd2d.png/show'},
          {name: 'Hishi Amazon [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216944/de928ce3ba8b8a9cc9a2999098d0ce04.png/show'},
          {name: 'Agnes Digital [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216945/4607d840792fb93e0df99f61b1ddb399.png/show'},
          {name: 'Biwa Hayahide [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216985/01e40df193e3a5f9de04bb7fca147fe5.png/show'},
          {name: 'Mihono Bourbon [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216990/c93234f00732bb0874bc56cba419b535.png/show'},
          {name: 'Mejiro Ryan [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4349335/10df3b37ecf5536f5db6631254bac6fc.png/show'},
          {name: 'Smart Falcon [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216991/e6a2938ea440ec2613f9be10bca4b43b.png/show'},
          {name: 'Daitaku Helios [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216992/c32a9c86acbf0fa0c1f112ce98384d23.png/show'},
          {name: 'Yaeno Muteki [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4240324/babf8a476d6d10ba01b74023b493bf5d.png/show'},
          {name: 'Bamboo Memory [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4265541/f4778bb3cd801b3c9c38603aa50089e2.png/show'},
          {name: 'Inari One [Tracen Academy]', rarity: 'R', img: 'https://img.game8.jp/6374825/8a59c6654d209107dac9061810277666.png/show'},
          {name: 'Admire Vega [Tracen Academy]', rarity: 'R', img: 'https://img.game8.jp/6435146/d9d56032a8789b86f6fa814dc420b6d2.png/show'},
        ] 
      },

      Guts: {
        SSR: [
          {name: 'Special Week [The Brightest Star in Japan]', rarity: 'SSR', img: 'https://img.game8.co/4216993/16c750efec8532117bc9ed533cf6fa0d.png/show'},
          {name: 'Grass Wonder [Fairest Fleur]', rarity: 'SSR', img: 'https://img.game8.co/4216914/d3a5be46db7cb56fbdb09a397bb2c3da.png/show'},
          {name: 'Ines Fujin [Watch My Star Fly!]', rarity: 'SSR', img: 'https://img.game8.co/4216996/83890ed399ec6f42c8d7e17d88e8d6ce.png/show'},
          {name: 'Winning Ticket [BNWinner!]', rarity: 'SSR', img: 'https://img.game8.co/4217000/fddfb473ee49dd370770216053b5f8ab.png/show'},
          {name: 'Haru Urara [Urara´s Day Off!]', rarity: 'SSR', img: 'https://img.game8.co/4216978/65131316552f0e4da5eab402d6dc82be.png/show'},
          {name: 'Mejiro Palmer [Go Ahead and Laugh]', rarity: 'SSR', img: 'https://img.game8.co/4217014/a8135fb8f5e9321ab1481e325bf13107.png/show'},
          {name: 'Matikane Tannhauser [Just Keep Going]', rarity: 'SSR', img: 'https://img.game8.co/4220093/f5f333c012b66df055ff4ba4d39b1074.png/show'},
          {name: 'Hishi Akebono [Who Wants the First Bite?]', rarity: 'SSR', img: 'https://img.game8.co/4240308/6bac02aa70f8f486171c2bab8ef4fcd5.png/show'},
          {name: 'Mejiro Ryan [Winning Pitch]', rarity: 'SSR', img: 'https://img.game8.jp/5979043/e1fa392cfced3efa5833c6f8383121ca.png/show'},
          {name: 'Ikuno Dictus [Warm Heart, Soft Steps]', rarity: 'SSR', img: 'https://img.game8.jp/6175644/991b125a25f0add8624945fc2d012646.png/show'},
          {name: 'Yukino Bijin [Dancing Light into the Night]', rarity: 'SSR', img: 'https://img.game8.jp/6261700/b4f464cd1b6472771f39417caca3fa57.png/show'},
          {name: 'Sakura Bakushin O [Super! Sonic! Flower Power!]', rarity: 'SSR', img: 'https://img.game8.jp/6528950/9641416a2de553df46de0f7f2c6298d6.png/show'},
        ],
        
        SR: [
          {name: 'Air Groove [Nothing Escapes the Vice Prez]', rarity: 'SR', img: 'https://img.game8.co/4217007/0616c623d3f8c40f45c449cbb823efe3.png/show'},
          {name: 'Yukino Bijin [City Girl 101]', rarity: 'SR', img: 'https://img.game8.co/4216955/c4e8c1d6bdfaca1788be4f880ced0d8c.png/show'},
          {name: 'Meisho Doto [Fighting for Fortune]', rarity: 'SR', img: 'https://img.game8.co/4216956/9de8f34382a448c0c7b0d554f8785764.png/show'},
          {name: 'Nice Nature [It´s Just Water]', rarity: 'SR', img: 'https://img.game8.co/4216986/1293ea3dc08e0b8251cb32e9c203fbd8.png/show'},
          {name: 'Tamamo Cross [Now Dat´s What I Call Grilled Squid!]', rarity: 'SR', img: 'https://img.game8.jp/6461489/585615179fbfc287675dba62d35adf90.png/show'},
          {name: 'Seeking the Pearl [The World´s My Oyster]', rarity: 'SR', img: 'https://img.game8.co/4240304/7c375b9abd0e8d964e5cd7342bddbbb9.png/show'},
          {name: 'Sirius Symboli [The Brightest Star Shines On]', rarity: 'SR', img: 'https://img.game8.jp/6242690/72ca483ca015fbf77da322a30b04c1cf.png/show'},
        ],
        
        R: [
          {name: 'Special Week [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216958/25c81566b57b485e2d9a21e116b318c5.png/show'},
          {name: 'Grass Wonder [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216971/c8b095ba9082104db8120b5d74bf51c0.png/show'},
          {name: 'Winning Ticket [Tracen Academy]', random: 'R', img: 'https://img.game8.co/4216965/e1b0104339f36ddd6585e5b10db5f326.png/show'},
          {name: 'Haru Urara [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216938/1e0e77645cb3eb2c4a6b6145bd34b349.png/show'},
          {name: 'Air Groove [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216933/2cae6e1f661cd542c2721e8d88d64478.png/show'},
          {name: 'Yukino Bijin [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216980/4884b663a3cbc6f19ca1aee4d57069a4.png/show'},
          {name: 'Ines Fujin [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216966/aa50bd5b3222cbc7908e23b9f350cc56.png/show'},
          {name: 'Meisho Doto [Tracenm Academy]', rarity: 'R', img: 'https://img.game8.co/4216943/a8329f870a22d76d3f92545652fea87f.png/show'},
          {name: 'Nice Nature [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216977/68a91c4e250bd9eda14339839a301d72.png/show'},
          {name: 'Mejiro Palmer [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4217013/ecae9a3a0d60c928c18a9804797dd0c2.png/show'},
          {name: 'Matikane Tannhauser [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4220095/44c5c3f92c62525ec0a6600fc407fae6.png/show'},
          {name: 'Seeking the Pearl [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4240305/fb2f8ea5195fb9259f83d24cdf582fa5.png/show'},
          {name: 'Hishi Akebono [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4240309/67179eefb7eb1c332eb6663221e41833.png/show'},
          {name: 'Sirius Symboli [Tracen Academy]', rarity: 'R', img: 'https://img.game8.jp/6243481/10a87bf0213c0b5df2637ea93146a626.png/show'},
        ]
      },

      Wit: {
        SSR: [
          {name: 'Fine Motion [Wave of Gratitude]', rarity: 'SSR', img: 'https://img.game8.co/4216994/d4101a28256f6e1f77751492dd3d66c0.png/show'},
          {name: 'Air Shakur [7 More Centimeters]', rarity: 'SSR', img: 'https://img.game8.co/4216999/6bac71aff0bb69cd1f4d3b0a9cffc62b.png/show'},
          {name: 'Yukino Bijin [Hometown Cheers]', rarity: 'SSR', img: 'https://img.game8.co/4218903/869d49a4cf1ba071c652ddcf73df7a64.png/show'},
          {name: 'Mejiro Dober [My Thoughts, My Desires]', rarity: 'SSR', img: 'https://img.game8.co/4253944/755c8a4932d0d26a397f6a46c92371f7.png/show'},
          {name: 'Nice Nature [Daring to Dream]', rarity: 'SSR', img: 'https://img.game8.jp/6086655/77647ff80a234772a65fd6fd449c8eda.png/show'},
          {name: 'Seiun Sky [Paint the Sky Red]', rarity: 'SSR', img: 'https://img.game8.co/4265540/5238d14d098b14423656d4dda3597741.png/show'},
          {name: 'Mihono Bourbon [The Ghost Finds Halloween Magic]', rarity: 'SSR', img: 'https://img.game8.jp/6194890/8dcbc8ea75c47357af3243f8758b56c3.png/show'},
          {name: 'Curren Chan [Cutie Pie with Shining Eyes]', rarity: 'SSR', img: 'https://img.game8.jp/6261712/fe60db3a2bdbabd9d0baf22130fae22b.png/show'},
          {name: 'Narita Taishin [Strict Shopper]', rarity: 'SSR', img: 'https://img.game8.jp/6346019/70506babecdf51a49e9f8e0d8b63ef04.png/show'},
          {name: 'Nishino Flower [Little Cupcakes, Big Emotions]', rarity: 'SSR', img: 'https://img.game8.jp/6528949/5a61d2ab81eabe56bccf905cfce0952e.png/show'},
        ],
        
        SR: [
          {name: 'Fuji Kiseki [Well, Look Who´s Home]', rarity: 'SR', img: 'https://img.game8.co/4217005/0ae89a5a90396fd64a70e7e3ac7ff61f.png/show'},
          {name: 'Daiwa Scarlet [Nothing Hard Work Can´t Solve!]', rarity: 'SR', img: 'https://img.game8.co/4217004/a1dca6a3b7dc01d7260b61354206572b.png/show'},
          {name: 'Agnes Tachyon [Experimental Studies on Subject A]', rarity: 'SR', img: 'https://img.game8.co/4217009/addcf67073760c7d6819b1de161f8ac4.png/show'},
          {name: 'Marvelous Sunday [A Marvelous ☆ Plan]', rarity: 'SR', img: 'https://img.game8.co/4216934/8ed4f64c8e2d6d323ef3c37497d037cc.png/show'},
          {name: 'Matikane Fukukitaru [Fate´s Forecast]', rarity: 'SR', img: 'https://img.game8.co/4216987/5379a2f017eb00497a1964a0000d1e61.png/show'},
          {name: 'Mejiro Dober [Ignore the Stares]', rarity: 'SR', img: 'https://img.game8.co/4216921/91b37320035a93c4d4797d5ad49278ea.png/show'},
          {name: 'Ikuno Dictus [Never Skip Warm-Ups]', rarity: 'SR', img: 'https://img.game8.co/4217012/b411b9e36183d24fda36f781bc9e6a1a.png/show'},
          {name: 'Nice Nature [Messing Around]', rarity: 'SR', img: 'https://img.game8.co/4220989/f10dfe2e4cecd3e18a7534b2a791023c.png/show'},
          {name: 'Mejiro Ardan [My Heart Will Go On]', rarity: 'SR', img: 'https://img.game8.jp/5979044/20be67c0059e892cd25d5a4e32497cce.png/show'},
        ],
        
        R: [
          {name: 'Symboli Rudolf [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216969/0516ab70aec6e37f9f2bcbc17bd2ae1c.png/show'},
          {name: 'Daiwa Scarlet [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216984/73331d1d65f44053154bea4a138a6d9b.png/show'},
          {name: 'Fine Motion [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216962/a2193f27d76fb4218619fec68e7797cd.png/show'},
          {name: 'Agnes Tachyon [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216989/e74aee0dce7aad6e5f96e5e82d48f8b9.png/show'},
          {name: 'Air Shakur [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216929/4c82127146485b7a7600a2cb97c90f68.png/show'},
          {name: 'Marvelous Sunday [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216924/68bf1622fe04089d550f9d4adaa6a9c3.png/show'},
          {name: 'Matikane Fukukitaru [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216947/77ab31bbd4698183e7457ce1c2bbd63a.png/show'},
          {name: 'Mejiro Dober [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216937/b6723d6367b19cd3dfe48e47364a4a4c.png/show'},
          {name: 'Fuji Kiseki [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216979/b7b5c07c43e6e40459ab92099269cb32.png/show'},
          {name: 'Ikuno Dictus [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4217011/dd81da93b51f0cfdf31e3f6c1cd34001.png/show'},
          {name: 'Mejiro Ardan [Tracen Academy]', rarity: 'R', img: 'https://img.game8.jp/5979042/66f6527535f1b8885a4fc4944498d9cd.png/show'},
          {name: 'Curren Chan [Tracen Academy]', rarity: 'R', img: 'https://img.game8.jp/6261702/d6ec36fb38d2604450385a27628577a0.png/show'},
        ]
      },

      Pal: {
        SSR: [
          {name: 'Tazuna Hayakawa [Tracen Reception]', rarity: 'SSR', img: 'https://img.game8.co/4216917/9b0f5878cb94b64a49393cb84ecc54d8.png/show'},
          {name: 'Riko Kashimoto [Planned Perfection]', rarity: 'SSR', img: 'https://img.game8.jp/6114398/dd1ddf8824181a9f204347c733ff04f2.png/show'},
          {name: 'Sasami Anshinzawa [This Might Sting!]', rarity: 'SSR', img: 'https://img.game8.jp/6461346/baa0a3e953ccd7915d95f70e9e8badaa.png/show'},
        ],
        
        SR: [
          {name: 'Aoi Kiryuin [Trainer´s Teamwork]', rarity: 'SR', img: 'https://img.game8.co/4216935/100f6b7ab85435cdc59451e65415ded4.png/show'},
        ],
        
        R: [
          {name: 'Tazuna Hayakawa [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216939/1a9a6e6b9bc76537165d89da93cd1232.png/show'},
          {name: 'Aoi Kiryuin [Tracen Academy]', rarity: 'R', img: 'https://img.game8.co/4216983/65b61cadbd6e7036575497f1a01ce0c7.png/show'},
          {name: 'Riko Kashimoto [Tracen Academy]', rarity: 'R', img:'https://img.game8.jp/6114399/858520a4e8edea57917153cf59fadda0.png/show'},
          {name: 'Sasami Anshinzawa [Acupuncturist]', rarity: 'R', img: 'https://img.game8.co/4407194/29403a3c1d49c166b68f21e01674c717.png/show'},
        ]
      }
    };

    const SLOT_COUNT = 6;
    const GRID = document.getElementById('grid');

    // Helper
    function pickRandom(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

    // Construir slots (3x2)
    for(let i=1;i<=SLOT_COUNT;i++){
      const slot = document.createElement('div');
      slot.className = 'slot';
      slot.id = `slot-${i}`;
      slot.innerHTML = `
        <div class="chosen" id="chosen-${i}">
          <div class="placeholder" style="color:var(--muted)">Sin carta generada</div>
        </div>
        <label style="display:block;margin-top:8px;font-weight:600">Slot ${i} — Tipo</label>
        <select id="type-${i}" data-slot="${i}">
          <option value="Speed">Speed</option>
          <option value="Stamina">Stamina</option>
          <option value="Power">Power</option>
          <option value="Guts">Guts</option>
          <option value="Wit">Wit</option>
          <option value="Pal">Pal</option>
        </select>
        <div class="card-list" id="list-${i}"></div>
      `;
      GRID.appendChild(slot);
      // inicializar lista
      updateCardList(i);
      // actualizar lista al cambiar tipo
      slot.querySelector('select').addEventListener('change', ()=> updateCardList(i));
    }

    // Actualiza la lista visible (por rareza) bajo el selector en ese slot
    function updateCardList(slotNumber){
      const type = document.getElementById(`type-${slotNumber}`).value;
      const listDiv = document.getElementById(`list-${slotNumber}`);
      const bucket = SUPPORT_CARDS[type];
      listDiv.innerHTML = '';
    }

// --- Variables para el selector de cartas ---
let disabledCards = new Set(); // guardará las cartas desactivadas

function initCardSelector() {
  const container = document.getElementById("allCardsGrid");
  container.innerHTML = "";

  const allCards = [];

  // Recolectar todas las cartas
  for (const type in SUPPORT_CARDS) {
    for (const rarity in SUPPORT_CARDS[type]) {
      SUPPORT_CARDS[type][rarity].forEach(card => {
        allCards.push({ ...card, type, rarity });
      });
    }
  }

  // --- ORDENAR POR RAREZA: SSR > SR > R ---
  const rarityPriority = { SSR: 3, SR: 2, R: 1 };
  const sortedCards = allCards.slice().sort((a, b) => {
    return rarityPriority[b.rarity] - rarityPriority[a.rarity];
  });

  // FILTRO POR TIPO (iconos arriba)
  const typeIcons = document.querySelectorAll(".type-icon");
  let currentTypeFilter = null;

  function updateCardDisplayByType(type) {
    const imgs = document.querySelectorAll("#allCardsGrid img");
    imgs.forEach(img => {
      img.style.display = (!type || img.dataset.type === type) ? "inline-block" : "none";
    });
  }

  typeIcons.forEach(icon => {
    icon.addEventListener("click", () => {
      const type = icon.dataset.type;
      currentTypeFilter = currentTypeFilter === type ? null : type;

      typeIcons.forEach(i => i.classList.remove("active"));
      if (currentTypeFilter) {
        document.querySelector(`[data-type="${currentTypeFilter}"]`).classList.add("active");
      }

      updateCardDisplayByType(currentTypeFilter);
    });
  });

  // --- CREAR IMÁGENES YA ORDENADAS ---
  sortedCards.forEach(card => {
    const img = document.createElement("img");
    img.src = card.img;
    img.alt = card.name;
    img.title = `${card.name}`;
    img.dataset.type = card.type;
    img.style.width = "80px";
    img.style.margin = "4px";
    img.style.cursor = "pointer";

    if (disabledCards.has(card.name)) {
      img.classList.add("disabled");
      img.style.filter = "grayscale(100%)";
    }

    img.addEventListener("click", () => {
      if (disabledCards.has(card.name)) {
        disabledCards.delete(card.name);
        img.classList.remove("disabled");
        img.style.filter = "grayscale(0%)";
      } else {
        disabledCards.add(card.name);
        img.classList.add("disabled");
        img.style.filter = "grayscale(100%)";
      }
    });

    container.appendChild(img);
  });
}

  const container = document.getElementById("allCardsGrid");
  container.innerHTML = ""; // limpiar por si acaso

  const allCards = [];

  // Recorrer SUPPORT_CARDS por tipo y rareza
  for (const type in SUPPORT_CARDS) {
    for (const rarity in SUPPORT_CARDS[type]) {
      SUPPORT_CARDS[type][rarity].forEach(card => {
        allCards.push({ ...card, type, rarity }); // guardamos tipo y rareza
      });
    }
  }


  function updateCardDisplayByType(type) {
  const allCardImages = document.querySelectorAll("#allCardsGrid img");

  allCardImages.forEach(img => {
    const cardType = img.dataset.type;
    if (!type || cardType === type) {
      img.style.display = "inline-block";
    } else {
      img.style.display = "none";
    }
  });
}

  const typeIcons = document.querySelectorAll(".type-icon");
    let currentTypeFilter = null;

    typeIcons.forEach(icon => {
      icon.addEventListener("click", () => {
        const type = icon.dataset.type;

        if (currentTypeFilter === type) {
          currentTypeFilter = null;
        } else {
          currentTypeFilter = type;
        }

        typeIcons.forEach(i => {
          if (i.dataset.type === currentTypeFilter) i.classList.add("active");
          else i.classList.remove("active");
        });

        updateCardDisplayByType(currentTypeFilter);
      });
    });


  allCards.forEach(card => {
    // --- ORDENAR POR RAREZA (SSR > SR > R), MANTENIENDO ORDEN ORIGINAL ---
    const rarityPriority = { "SSR": 3, "SR": 2, "R": 1 };

    const sortedCards = allCards.slice().sort((a, b) => {
      return rarityPriority[b.rarity] - rarityPriority[a.rarity];
    });
    const img = document.createElement("img");
    img.src = card.img || "ruta/default.png";
    img.alt = card.name;
    img.title = `${card.name} — ${card.rarity} — ${card.type}`;
    img.dataset.type = card.type;
    img.style.width = "80px";
    img.style.margin = "4px";
    img.style.cursor = "pointer";
    img.style.filter = "grayscale(0)"; // por defecto a color

    img.addEventListener("click", () => {
      if (disabledCards.has(card.name)) {
        disabledCards.delete(card.name);
        img.style.filter = "grayscale(0)";
      } else {
        disabledCards.add(card.name);
        img.style.filter = "grayscale(100%)";
      }
    });

    container.appendChild(img);
    sortedCards.forEach(card => {
  // tu código para crear <img>
});

  });

function toggleAllCards() {
  const btn = document.getElementById("toggleAllBtn");
  const allImages = document.querySelectorAll("#allCardsGrid img");

  // Si el texto actual es "Seleccionar todas", entonces al hacer clic queremos
  // pasar todas a blanco y negro (deshabilitarlas). Si el texto es "Deseleccionar todas",
  // queremos devolverlas a color (habilitarlas).
  const selectingAll = btn.innerText === "Seleccionar todas";

  if (selectingAll) {
    // Poner todas en blanco y negro y marcarlas como deshabilitadas
    allImages.forEach(img => {
      disabledCards.add(img.title);
      img.classList.add("disabled");
      img.style.filter = "grayscale(100%)";
    });
    btn.innerText = "Deseleccionar todas";
  } else {
    // Volver todas a color y quitarlas de deshabilitadas
    allImages.forEach(img => {
      disabledCards.delete(img.title);
      img.classList.remove("disabled");
      img.style.filter = "grayscale(0)";
    });
    btn.innerText = "Seleccionar todas";
  }
}

// Genera la carta aleatoria por slot y evita duplicados de carta y de personaje
// Ahora respeta también disabledCards en TODOS los pasos (incluyendo fallbacks)
function generateAllSlots() {
  const usedCards = new Set();      // nombres exactos ya usados (p.ej. 'King Halo [First-Rate Plan]')
  const usedCharacters = new Set(); // nombres base de personaje ya usados (p.ej. 'King Halo')

  // Helper para extraer nombre base (antes del '[')
  const baseName = name => (typeof name === 'string' && name.includes('[')) ? name.split('[')[0].trim() : (name || '').trim();

  for (let i = 1; i <= SLOT_COUNT; i++) {
    const type = document.getElementById(`type-${i}`).value;
    const bucket = SUPPORT_CARDS[type];

    // Unir todas las cartas de este tipo (SSR + SR + R)
    const pool = [];
    if (bucket && bucket.SSR) pool.push(...bucket.SSR.map(c => ({ ...c, rarity: 'SSR', type })));
    if (bucket && bucket.SR) pool.push(...bucket.SR.map(c => ({ ...c, rarity: 'SR', type })));
    if (bucket && bucket.R) pool.push(...bucket.R.map(c => ({ ...c, rarity: 'R', type })));

    const chosenDiv = document.getElementById(`chosen-${i}`);

    // Filtrar cartas que estén deshabilitadas por el selector global
    const poolAvailable = pool.filter(c => !disabledCards.has(c.name));

    // Filtrar para eliminar las cartas que ya se usaron (por nombre exacto)
    // y también eliminar cartas cuyo personaje base ya haya sido usado en otro slot
    let available = poolAvailable.filter(c => {
      const b = baseName(c.name);
      return !usedCards.has(c.name) && !usedCharacters.has(b);
    });

    // Si no hay disponibles estrictos, intentar fallbacks que TAMBIÉN respeten disabledCards
    if (available.length === 0) {
      // fallback1: cartas no usadas por nombre (pero aún respetando disabled + personaje)
      const fallback1 = poolAvailable.filter(c => !usedCards.has(c.name) && !usedCharacters.has(baseName(c.name)));

      // fallback2: cartas que no compiten por personaje (pero respetando disabled + no repetir nombre)
      const fallback2 = poolAvailable.filter(c => !usedCharacters.has(baseName(c.name)) && !usedCards.has(c.name));

      // fallback3: cualquier carta disponible que no esté disabled y no repetida por nombre (aceptar personaje repetido si no hay más)
      const fallback3 = poolAvailable.filter(c => !usedCards.has(c.name));

      let card = null;
      if (fallback1.length > 0) card = pickRandom(fallback1);
      else if (fallback2.length > 0) card = pickRandom(fallback2);
      else if (fallback3.length > 0) card = pickRandom(fallback3);

      if (!card) {
        chosenDiv.innerHTML = `<div style="color:var(--muted)">Sin cartas disponibles (todas ya usadas o deshabilitadas)</div>`;
        continue;
      } else {
        usedCards.add(card.name);
        usedCharacters.add(baseName(card.name));
        chosenDiv.innerHTML = `
          ${card.img ? `<img src="${card.img}" alt="${card.name}" loading="lazy">` : ''}
          <div class="meta"><strong>${card.name}</strong><br><small style="color:var(--muted)">${card.rarity} — ${type}</small></div>
        `;
        continue;
      }
    }

    // Elegir una carta aleatoria y marcarla como usada (por carta y por personaje)
    const card = pickRandom(available);
    usedCards.add(card.name);
    usedCharacters.add(baseName(card.name));

    // Mostrar en su respectivo slot
    chosenDiv.innerHTML = `
      ${card.img ? `<img src="${card.img}" alt="${card.name}" loading="lazy">` : ''}
      <div class="meta"><strong>${card.name}</strong><br><small style="color:var(--muted)">${card.rarity} — ${type}</small></div>
    `;
  }
}


    // Genera carta para un slot específico
    function generateSlot(slotNumber){
      const type = document.getElementById(`type-${slotNumber}`).value;
      const bucket = SUPPORT_CARDS[type];
      const chosenDiv = document.getElementById(`chosen-${slotNumber}`);
      // Recolectar por rareza respetando orden SSR->SR->R
      const pool = [];
      if(bucket.SSR) pool.push(...bucket.SSR.map(c=>({...c, rarity:'SSR'})));
      if(bucket.SR) pool.push(...bucket.SR.map(c=>({...c, rarity:'SR'})));
      if(bucket.R) pool.push(...bucket.R.map(c=>({...c, rarity:'R'})));

      // Si no hay cartas, mostrar aviso
      if(pool.length===0){
        chosenDiv.innerHTML = `<div style="color:var(--muted)">Sin cartas disponibles para <strong>${type}</strong></div>`;
        return;
      }

      // Selección aleatoria entre la pool (todas las cartas del tipo)
      const card = pickRandom(pool);
      // Mostrar en el mismo slot (imagen arriba, meta abajo)
      chosenDiv.innerHTML = `
        ${card.img ? `<img src="${card.img}" alt="${card.name}" loading="lazy">` : ''}
        <div class="meta"><strong>${card.name}</strong><br><small style="color:var(--muted)">${card.rarity} — ${type}</small></div>
      `;
    }

    // Botones
    document.getElementById('generateBtn').addEventListener('click', ()=> {
      generateAllSlots();
    });

    // Botón para limpiar el deck (elimina todas las cartas generadas)
    document.getElementById('clearDeckBtn').addEventListener('click', () => {
      for (let i = 1; i <= SLOT_COUNT; i++) {
        const chosenDiv = document.getElementById(`chosen-${i}`);
        chosenDiv.innerHTML = `<div class="placeholder" style="color:var(--muted)">Sin carta generada</div>`;
      }
    });

    // Mostrar / ocultar el selector de cartas
    document.getElementById("toggleSelectorBtn").addEventListener("click", () => {
      const selector = document.getElementById("cardSelector");
      if (selector.style.display === "none") {
        selector.style.display = "block";
        initCardSelector();
      } else {
        selector.style.display = "none";
      }
    });

    // Inicial: actualizar listas
    for(let i=1;i<=SLOT_COUNT;i++) updateCardList(i);
    
  </script>

  <a href="index.html">
  <button type="button" class="flex-1 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">Volver al inicio</button>
</a>

</body>
</html>
